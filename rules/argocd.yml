# https://github.com/samber/awesome-prometheus-alerts/blob/master/dist/rules/argocd/embedded-exporter.yml
apiVersion: "monitoring.coreos.com/v1"
kind: "PrometheusRule"
metadata:
  name: "argocd-rules"
  namespace: "monitoring"
  labels:
    release: "prom-operator"
spec:
  groups:
    - name: "./argocd.rules"
      rules:
        - alert: "ArgocdServiceNotSynced"
          expr: 'argocd_app_info{sync_status!="Synced"} != 0'
          for: "15m"
          labels:
            severity: "warning"
          annotations:
            summary: "ArgoCD service not synced (instance {{ $labels.instance }})"
            description: "Service {{ $labels.project }}/{{ $labels.name }} run by ArgoCD is currently not in sync!"

        - alert: "ArgocdServiceUnhealthy"
          expr: 'argocd_app_info{health_status!="Healthy"} != 0'
          for: "15m"
          labels:
            severity: "warning"
          annotations:
            summary: "ArgoCD service unhealthy (instance {{ $labels.instance }})"
            description: "Service {{ $labels.project }}/{{ $labels.name }} run by ArgoCD is currently not healthy!"
