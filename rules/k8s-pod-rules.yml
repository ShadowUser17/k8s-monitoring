apiVersion: "monitoring.coreos.com/v1"
kind: "PrometheusRule"
metadata:
  name: "custom-pod-rules"
  namespace: "monitoring"
  labels:
    release: "prom-operator"
spec:
  groups:
    - name: "custom-pod-record.rules"
      rules:
        - expr: 'sum(kube_pod_info * on(namespace, pod) group_left kube_pod_created) by(node, namespace, pod)'
          record: "kube_pod_joined_info"

        - expr: 'sum(kube_pod_container_status_last_terminated_reason * on(namespace, pod) group_left kube_pod_info) by(node, namespace, pod, reason)'
          record: "kube_pod_terminated_info"

    # - name: "custom-pod-alert.rules"
    #   rules: []
